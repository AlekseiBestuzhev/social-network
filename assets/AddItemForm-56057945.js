var p=Object.defineProperty;var d=(t,r,e)=>r in t?p(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var n=(t,r,e)=>(d(t,typeof r!="symbol"?r+"":r,e),e);import{S as c,r as o,j as s,B as x}from"./index-d2e6744b.js";const u="_wrapper_1lyoh_1",l="_textarea_1lyoh_10",f="_errorMessage_1lyoh_34",a={wrapper:u,textarea:l,errorMessage:f};class m extends o.Component{constructor(e){super(e);n(this,"textareaRef");this.state={error:""},this.textareaRef=o.createRef()}componentDidMount(){this.adjustTextareaHeight()}componentDidUpdate(e){e.currentText!==this.props.currentText&&this.adjustTextareaHeight()}adjustTextareaHeight(){if(this.textareaRef.current){this.textareaRef.current.style.height="0px",this.textareaRef.current.style.height=this.textareaRef.current.scrollHeight+"px";const e=200;this.textareaRef.current.scrollHeight>e?(this.textareaRef.current.style.overflowY="scroll",this.textareaRef.current.style.height=e+"px"):this.textareaRef.current.style.overflowY="hidden"}}onChangeHandler(e){this.state.error&&this.setState({error:""}),this.props.updateCurrentText(e.currentTarget.value)}onKeyDownAdd(e){e.key==="Enter"&&(e.shiftKey||(e.preventDefault(),this.addTextHandler()))}addTextHandler(){const e=this.props.currentText.trim();if(!e)this.setState({error:"Text is required"}),this.props.updateCurrentText("");else{this.props.updateCurrentText(e),this.state.error&&this.setState({error:""});const i=`${this.props.userID}`||"unknown",h=this.props.name||"unknown";this.props.addText(i,h,this.props.avatar)}}render(){return s.jsxs("div",{className:a.wrapper,children:[s.jsx("textarea",{className:`${a.textarea} ${this.state.error&&a.errorMessage}`,value:this.props.currentText,placeholder:this.state.error||this.props.placeholder,onKeyDown:this.onKeyDownAdd.bind(this),onChange:this.onChangeHandler.bind(this),ref:this.textareaRef}),s.jsx(x,{onClick:this.addTextHandler.bind(this),disabled:!this.props.currentText,variant:"submit",children:this.props.children})]})}}const T=t=>({userID:t.auth.id,name:t.auth.fullName,avatar:t.auth.photos.large}),R=c(T)(m);export{R as A};
