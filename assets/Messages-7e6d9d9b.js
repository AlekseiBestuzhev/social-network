import{S as f,T as N,U as v,r as i,H as u,j as e,k as d,V as x,W as w,X as L,N as D,A as k,l as M,O as C,Y as S}from"./index-d2e6744b.js";import{A as I}from"./AddItemForm-56057945.js";import{w as W}from"./withAuthRedirect-130d4bfb.js";const R=s=>({currentText:s.messagesPage.newMessageText}),T=s=>({updateCurrentText:a=>{const o=v(a);s(o)},addText:(a,o,t)=>{const r=N(a,o,t);s(r)}}),$=f(R,T)(I),b="_wrapper_5uton_1",A="_message_5uton_7",z="_time_5uton_26",y="_iSender_5uton_31",m={wrapper:b,message:A,time:z,iSender:y},P=i.memo(({text:s,iSender:a,time:o})=>{const t=u(m.wrapper,{[m.iSender]:a});return e.jsxs("div",{className:t,children:[e.jsx("div",{className:m.message,children:s}),e.jsx("p",{className:m.time,children:o})]})}),E="_dialogMessages_g230i_1",U={dialogMessages:E},h=s=>s.messagesPage.messagesData,q=""+new URL("dialog-dde93bae.webp",import.meta.url).href,B=""+new URL("dialog-a2d86ade.gif",import.meta.url).href,F=i.memo(({userID:s})=>{const a=i.useRef(null),o=d(h)[s],t=()=>{var n;(n=a.current)==null||n.scrollIntoView({behavior:"smooth"})};i.useEffect(()=>{t()},[o]);const r=o.length?o.map(n=>e.jsx(P,{id:n.id,text:n.text,userID:n.userID,userName:n.userName,avatar:n.avatar,time:n.time,date:n.date,iSender:s!==n.userID},n.id)):e.jsx(x,{text:"Write a message to start chatting...",picture:B,pictureWebp:q});return e.jsxs("div",{className:U.dialogMessages,children:[r,e.jsx("div",{ref:a})]})}),V="_wrapper_3g3eu_1",H="_header_3g3eu_6",O="_name_3g3eu_14",X="_menuIcon_3g3eu_18",Y="_formWrapper_3g3eu_28",l={wrapper:V,header:H,name:O,menuIcon:X,formWrapper:Y},j=s=>s.messagesPage.dialogsData,G=i.memo(({userID:s})=>{const a=d(j),o=(()=>{const t=a.find(r=>r.id===s);return(t==null?void 0:t.name)||""})();return e.jsxs("div",{className:l.wrapper,children:[e.jsxs("div",{className:l.header,children:[e.jsx("h4",{className:l.name,children:o}),e.jsx(w,{className:l.menuIcon,onClick:()=>alert("There will be a drop-down list")})]}),e.jsx(F,{userID:s}),e.jsx("div",{className:l.formWrapper,children:e.jsxs($,{placeholder:"Enter a message...",children:["Send ",e.jsx(L,{})]})})]})}),J="_dialog_1eurz_1",K="_link_1eurz_9",Q="_textBlock_1eurz_17",Z="_topLine_1eurz_20",ee="_name_1eurz_24",se="_lastMessage_1eurz_28",ae="_activeLink_1eurz_34",c={dialog:J,link:K,textBlock:Q,topLine:Z,name:ee,lastMessage:se,activeLink:ae},te=i.memo(({id:s,name:a,avatar:o,lastMessage:t,lastDate:r})=>{const n=({isActive:p})=>u(c.link,{[c.activeLink]:p});return e.jsx("li",{className:c.dialog,children:e.jsxs(D,{to:`/messages/${s}`,className:n,children:[e.jsx(k,{photo:o,size:"3.5rem"}),e.jsxs("div",{className:c.textBlock,children:[e.jsxs("div",{className:c.topLine,children:[e.jsx("p",{className:c.name,children:a}),e.jsx("p",{className:c.date,children:r.slice(0,-5)})]}),e.jsx("p",{className:c.lastMessage,children:t})]})]})})}),ne="_dialogItems_m4u6p_1",oe="_emptyList_m4u6p_6",_={dialogItems:ne,emptyList:oe},re=()=>{const s=d(j),a=d(h),o=s.length?s.map(t=>{const r=a[t.id][a[t.id].length-1],n=(r==null?void 0:r.text)||"",p=(r==null?void 0:r.date)||"";return e.jsx(te,{id:t.id,name:t.name,avatar:t.avatar,lastMessage:n,lastDate:p},t.id)}):e.jsx("span",{className:_.emptyList,children:"Nobody needs you..."});return e.jsx("ul",{className:_.dialogItems,children:o})},ce=""+new URL("messages-5daa85f7.webp",import.meta.url).href,ie=""+new URL("messages-49b20e1c.gif",import.meta.url).href,le="_page_1qx8j_1",me="_leftColumn_1qx8j_6",de="_title_1qx8j_9",pe="_rightColumn_1qx8j_17",ge="_formWrapper_1qx8j_22",g={page:le,leftColumn:me,title:de,rightColumn:pe,formWrapper:ge},he=W(()=>{const s=M(),{userID:a}=C();return i.useEffect(()=>{s(S(a||""))},[a]),e.jsxs("div",{className:g.page,children:[e.jsxs("div",{className:g.leftColumn,children:[e.jsx("h2",{className:g.title,children:"Dialogs"}),e.jsx(re,{})]}),a?e.jsx(G,{userID:a}):e.jsx(x,{text:"Choose the dialog...",picture:ie,pictureWebp:ce,size:"16rem"})]})});export{he as Messages};
