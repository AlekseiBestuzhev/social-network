import{V as f,W as N,X as v,r as i,K as u,j as e,k as d,Y as x,Z as w,_ as L,N as D,m as k,A as M,l as C,T as I,$ as S}from"./index-7340c2ec.js";import{A as W}from"./AddItemForm-c48f3e1e.js";import{w as $}from"./withAuthRedirect-9177b18f.js";const R=s=>({currentText:s.messagesPage.newMessageText}),T=s=>({updateCurrentText:a=>{const o=v(a);s(o)},addText:(a,o,t)=>{const r=N(a,o,t);s(r)}}),b=f(R,T)(W),A="_wrapper_5uton_1",z="_message_5uton_7",y="_time_5uton_26",P="_iSender_5uton_31",m={wrapper:A,message:z,time:y,iSender:P},E=i.memo(({text:s,iSender:a,time:o})=>{const t=u(m.wrapper,{[m.iSender]:a});return e.jsxs("div",{className:t,children:[e.jsx("div",{className:m.message,children:s}),e.jsx("p",{className:m.time,children:o})]})}),q="_dialogMessages_g230i_1",B={dialogMessages:q},h=s=>s.messagesPage.messagesData,U=""+new URL("dialog-dde93bae.webp",import.meta.url).href,F=""+new URL("dialog-a2d86ade.gif",import.meta.url).href,V=i.memo(({userID:s})=>{const a=i.useRef(null),o=d(h)[s],t=()=>{var n;(n=a.current)==null||n.scrollIntoView({behavior:"smooth"})};i.useEffect(()=>{t()},[o]);const r=o.length?o.map(n=>e.jsx(E,{id:n.id,text:n.text,userID:n.userID,userName:n.userName,avatar:n.avatar,time:n.time,date:n.date,iSender:s!==n.userID},n.id)):e.jsx(x,{text:"Write a message to start chatting...",picture:F,pictureWebp:U});return e.jsxs("div",{className:B.dialogMessages,children:[r,e.jsx("div",{ref:a})]})}),K="_wrapper_3g3eu_1",X="_header_3g3eu_6",Y="_name_3g3eu_14",Z="_menuIcon_3g3eu_18",G="_formWrapper_3g3eu_28",l={wrapper:K,header:X,name:Y,menuIcon:Z,formWrapper:G},j=s=>s.messagesPage.dialogsData,H=i.memo(({userID:s})=>{const a=d(j),o=(()=>{const t=a.find(r=>r.id===s);return(t==null?void 0:t.name)||""})();return e.jsxs("div",{className:l.wrapper,children:[e.jsxs("div",{className:l.header,children:[e.jsx("h4",{className:l.name,children:o}),e.jsx(w,{className:l.menuIcon,onClick:()=>alert("There will be a drop-down list")})]}),e.jsx(V,{userID:s}),e.jsx("div",{className:l.formWrapper,children:e.jsxs(b,{placeholder:"Enter a message...",children:["Send ",e.jsx(L,{})]})})]})}),J="_dialog_1eurz_1",O="_link_1eurz_9",Q="_textBlock_1eurz_17",ee="_topLine_1eurz_20",se="_name_1eurz_24",ae="_lastMessage_1eurz_28",te="_activeLink_1eurz_34",c={dialog:J,link:O,textBlock:Q,topLine:ee,name:se,lastMessage:ae,activeLink:te},ne=i.memo(({id:s,name:a,avatar:o,lastMessage:t,lastDate:r})=>{const n=({isActive:p})=>u(c.link,{[c.activeLink]:p});return e.jsx("li",{className:c.dialog,children:e.jsxs(D,{to:`${k.messages}/${s}`,className:n,children:[e.jsx(M,{photo:o,size:"3.5rem"}),e.jsxs("div",{className:c.textBlock,children:[e.jsxs("div",{className:c.topLine,children:[e.jsx("p",{className:c.name,children:a}),e.jsx("p",{className:c.date,children:r.slice(0,-5)})]}),e.jsx("p",{className:c.lastMessage,children:t})]})]})})}),oe="_dialogItems_m4u6p_1",re="_emptyList_m4u6p_6",_={dialogItems:oe,emptyList:re},ce=()=>{const s=d(j),a=d(h),o=s.length?s.map(t=>{const r=a[t.id][a[t.id].length-1],n=(r==null?void 0:r.text)||"",p=(r==null?void 0:r.date)||"";return e.jsx(ne,{id:t.id,name:t.name,avatar:t.avatar,lastMessage:n,lastDate:p},t.id)}):e.jsx("span",{className:_.emptyList,children:"Nobody needs you..."});return e.jsx("ul",{className:_.dialogItems,children:o})},ie=""+new URL("messages-5daa85f7.webp",import.meta.url).href,le=""+new URL("messages-49b20e1c.gif",import.meta.url).href,me="_page_1qx8j_1",de="_leftColumn_1qx8j_6",pe="_title_1qx8j_9",ge="_rightColumn_1qx8j_17",_e="_formWrapper_1qx8j_22",g={page:me,leftColumn:de,title:pe,rightColumn:ge,formWrapper:_e},je=$(()=>{const s=C(),{userID:a}=I();return i.useEffect(()=>{s(S(a||""))},[a]),e.jsxs("div",{className:g.page,children:[e.jsxs("div",{className:g.leftColumn,children:[e.jsx("h2",{className:g.title,children:"Dialogs"}),e.jsx(ce,{})]}),a?e.jsx(H,{userID:a}):e.jsx(x,{text:"Choose the dialog...",picture:le,pictureWebp:ie,size:"16rem"})]})});export{je as Messages};
