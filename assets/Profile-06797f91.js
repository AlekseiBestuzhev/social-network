var U=Object.defineProperty;var P=(s,n,t)=>n in s?U(s,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[n]=t;var k=(s,n,t)=>(P(s,typeof n!="symbol"?n+"":n,t),t);import{r as c,k as w,p as D,j as e,B as b,q as M,t as T,l as E,v as H,w as $,x as S,y as R,z as W,C as B,D as _,A as I,E as F,m as h,I as O,F as V,G as q,H as J,J as Z,K as G,M as K,O as Q,Q as Y,S as X,n as ee,T as se,U as te,L as ne}from"./index-7ab9cb1f.js";import{w as oe}from"./withAuthRedirect-d68edd03.js";import{A as re}from"./AddItemForm-891a0a63.js";const ae=""+new URL("facebook-1273c07c.svg",import.meta.url).href,ce=""+new URL("github-6d3fae75.svg",import.meta.url).href,ie=""+new URL("instagram-ed2b0b8d.svg",import.meta.url).href,le=""+new URL("mainLink-6ba5afa8.svg",import.meta.url).href,de=""+new URL("twitter-6624b7ae.svg",import.meta.url).href,pe=""+new URL("vk-49ab6602.svg",import.meta.url).href,me=""+new URL("website-28ec6190.svg",import.meta.url).href,ue=""+new URL("youtube-f52ea793.svg",import.meta.url).href,he={github:ce,vk:pe,facebook:ae,instagram:ie,twitter:de,website:me,mainLink:le,youtube:ue},fe="_wrapper_vxq17_1",xe={wrapper:fe},_e=c.memo(s=>{const{followingInProgress:n,followed:t,userID:o,isMe:r}=s,a=w(),i=D(),l=(z,y)=>()=>{a(T(z,y))},p=()=>{i(E.profileSettings)},m=t?"Unfollow":"Follow",u=t?e.jsx(H,{size:"1rem"}):e.jsx($,{size:"1rem"}),g=t?"default":"green";return e.jsx("div",{className:xe.wrapper,children:r?e.jsx(b,{onClick:p,variant:"white",size:"large",children:"Edit profile"}):e.jsxs(e.Fragment,{children:[e.jsxs(b,{onClick:()=>alert("Chat will work later"),variant:"white",size:"large",children:["Message ",e.jsx(M,{size:"1rem"})]}),e.jsxs(b,{disabled:n,variant:g,onClick:l(o,t),size:"large",children:[m,u]})]})})}),je=""+new URL("another-user-35e617b0.jpg",import.meta.url).href,we=""+new URL("another-user-d470d993.webp",import.meta.url).href,ge=""+new URL("profile-bcg-6d60cad0.jpeg",import.meta.url).href,ve=""+new URL("profile-bcg-078e3812.webp",import.meta.url).href,be="_avatarModal_mt9m9_1",ke="_content_mt9m9_8",Ce="_name_mt9m9_16",Ne="_date_mt9m9_23",Se="_likes_mt9m9_29",Re="_lock_mt9m9_44",x={avatarModal:be,content:ke,name:Ce,date:Ne,likes:Se,lock:Re},Ie=({photo:s,name:n})=>{const[t,o]=c.useState(!1);return e.jsxs("div",{className:x.avatarModal,children:[e.jsx("img",{src:s,alt:"Avatar"}),e.jsxs("aside",{className:x.content,children:[e.jsxs("h4",{className:x.name,children:[e.jsx("span",{children:n}),"'s avatar"]}),e.jsxs("p",{className:x.date,children:[e.jsx("span",{children:"09:22"})," 04 Jan 2023"]}),e.jsxs("div",{className:x.likes,children:[e.jsx("span",{children:"Likes:"})," ",t?1:0,t?e.jsx(S,{onClick:()=>o(!1)}):e.jsx(R,{onClick:()=>o(!0)})]}),e.jsxs("div",{className:x.lock,children:[e.jsx(W,{}),e.jsx("p",{children:"User locked comments..."})]})]})]})},Le="_modalWrapper_596yy_1",Ae="_background_596yy_11",ze="_window_596yy_20",ye="_bcgActive_596yy_31",Ue="_wndActive_596yy_34",j={modalWrapper:Le,background:Ae,window:ze,bcgActive:ye,wndActive:Ue},Pe=({children:s})=>{const[n]=c.useState(()=>document.createElement("div"));return c.useEffect(()=>(document.body.appendChild(n),()=>{document.body.removeChild(n)}),[]),B.createPortal(s,n)};class L extends c.Component{constructor(t){super(t);k(this,"timerRefAppear");k(this,"timerRefClose");this.timerRefAppear=c.createRef(),this.timerRefClose=c.createRef(),this.state={mounted:!1,mountingDone:!1}}componentDidUpdate(t){t.opened!==this.props.opened&&(this.props.opened?(this.setState({mounted:!0}),this.timerRefAppear.current=setTimeout(()=>{this.setState({mountingDone:!0})},30)):(this.setState({mountingDone:!1}),this.timerRefClose.current=setTimeout(()=>{this.setState({mounted:!1})},300)))}componentWillUnmount(){this.timerRefAppear.current&&clearTimeout(this.timerRefAppear.current),this.timerRefClose.current&&clearTimeout(this.timerRefClose.current)}closeHandler(){this.props.onClose()}render(){const t=_(j.background,{[j.bcgActive]:this.state.mountingDone}),o=_(j.window,{[j.wndActive]:this.state.mountingDone});return this.state.mounted?e.jsx(Pe,{children:e.jsxs("div",{className:j.modalWrapper,children:[e.jsx("div",{className:t,onClick:this.closeHandler.bind(this)}),e.jsx("div",{className:o,children:this.props.children})]})}):null}}const De=({photo:s,fullName:n})=>{const[t,o]=c.useState(!1),r=c.useCallback(()=>{o(!0)},[]),a=c.useCallback(()=>{o(!1)},[]);return e.jsxs(e.Fragment,{children:[e.jsx(I,{size:"12.5rem",photo:s,border:!0,onClick:r,turnOffCursorPointer:!s}),s&&e.jsx(L,{onClose:a,opened:t,children:e.jsx(Ie,{photo:s,name:n})})]})},Me="_extraInfo_cb27k_1",Te="_showExtraButton_cb27k_4",Ee="_showInfo_cb27k_19",He="_accordion_cb27k_22",$e="_expanded_cb27k_26",We="_list_cb27k_30",Be="_showList_cb27k_38",Fe="_contactsTitle_cb27k_45",Oe="_contacts_cb27k_45",Ve="_contactIcon_cb27k_59",qe="_item_cb27k_67",d={extraInfo:Me,showExtraButton:Te,showInfo:Ee,accordion:He,expanded:$e,list:We,showList:Be,contactsTitle:Fe,contacts:Oe,contactIcon:Ve,item:qe},Je=s=>{const{contacts:n,aboutMe:t,lookingForAJobDescription:o,lookingForAJob:r}=s.profile,[a,i]=c.useState(!1),l=c.useCallback(()=>{i(u=>!u)},[]),p="User doesn't provide information",m={button:_(d.showExtraButton,{[d.showInfo]:a}),accordion:_(d.accordion,{[d.expanded]:a}),list:_(d.list,{[d.showList]:a})};return e.jsxs("div",{className:d.extraInfo,children:[e.jsxs("button",{onClick:l,className:m.button,children:["Show more",e.jsx(F,{size:"1.5rem"})]}),e.jsx("div",{className:m.accordion,children:e.jsxs("div",{className:m.list,children:[e.jsxs("p",{children:[e.jsx("span",{className:d.item,children:"About me:"}),t||p]}),e.jsxs("p",{children:[e.jsx("span",{className:d.item,children:"Looking for a job:"}),e.jsx("input",{type:"checkbox",checked:r,readOnly:!0})]}),e.jsxs("p",{children:[e.jsx("span",{className:d.item,children:"Job description:"}),o||p]}),e.jsx("h4",{className:d.contactsTitle,children:"Contacts:"}),e.jsx("ul",{className:d.contacts,children:n&&Object.entries(n).map(([u,g])=>g?e.jsx("li",{children:e.jsx("a",{href:g,target:"_blank",rel:"noreferrer",children:e.jsx("img",{src:he[u],className:d.contactIcon,alt:`${u} icon`})})},u):null)})]})})]})},Ze="_header_dg3hd_1",Ge="_person_dg3hd_8",Ke="_info_dg3hd_15",Qe="_name_dg3hd_20",v={header:Ze,person:Ge,info:Ke,name:Qe},Ye="_root_1h4qm_1",Xe="_status_1h4qm_15",es="_pointer_1h4qm_23",C={root:Ye,status:Xe,pointer:es},ss="_wrapper_1diab_1",ts={wrapper:ss},A=s=>s.profile.status,ns=c.memo(({onClose:s})=>{const n=w(),t=h(A),[o,r]=c.useState(t),a=l=>{r(l.currentTarget.value)},i=async()=>{await n(q(o,s))};return e.jsxs("div",{className:ts.wrapper,children:[e.jsx(O,{title:"Enter new status",value:o,onChange:a}),e.jsxs(b,{variant:"main",size:"large",onClick:i,children:["Apply ",e.jsx(V,{size:"1.125rem"})]})]})}),os=({targetSize:s,onResize:n})=>{const t=c.useRef(null);return c.useEffect(()=>{const o=()=>{t.current&&n(t.current.offsetWidth>s)};return window.addEventListener("resize",o),o(),()=>{window.removeEventListener("resize",o)}},[s,n]),t},rs=c.memo(({isMe:s,status:n})=>{const[t,o]=c.useState(!1),r=os({targetSize:128,onResize:m=>{m?r.current.style.textAlign="left":r.current.style.textAlign="center"}}),a=()=>{s&&o(!0)},i=()=>{o(!1)},l="Enter status...",p={status:_(C.status,{[C.pointer]:s})};return!s&&!n?null:e.jsxs("div",{className:C.root,children:[s&&e.jsx(L,{onClose:i,opened:t,children:e.jsx(ns,{onClose:i})}),e.jsx("p",{className:p.status,onClick:a,ref:r,children:n||l})]})}),as=({isMe:s,status:n,profile:t,children:o})=>{const{fullName:r,photos:{large:a}}=t;return e.jsxs("section",{children:[e.jsxs("picture",{children:[e.jsx("source",{srcSet:s?ve:we,type:"image/webp"}),e.jsx("img",{className:v.header,src:s?ge:je,alt:"Profile cover"})]}),e.jsxs("div",{className:v.person,children:[e.jsxs("div",{className:v.info,children:[e.jsx(De,{photo:a,fullName:r}),e.jsx("h2",{className:v.name,children:r})]}),o]}),e.jsx(rs,{isMe:s,status:n}),e.jsx(Je,{profile:t})]})};function cs(s){return J({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M12 6C12.5523 6 13 6.44772 13 7V11H17C17.5523 11 18 11.4477 18 12C18 12.5523 17.5523 13 17 13H13V17C13 17.5523 12.5523 18 12 18C11.4477 18 11 17.5523 11 17V13H7C6.44772 13 6 12.5523 6 12C6 11.4477 6.44772 11 7 11H11V7C11 6.44772 11.4477 6 12 6Z",fill:"currentColor"}},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M5 22C3.34315 22 2 20.6569 2 19V5C2 3.34315 3.34315 2 5 2H19C20.6569 2 22 3.34315 22 5V19C22 20.6569 20.6569 22 19 22H5ZM4 19C4 19.5523 4.44772 20 5 20H19C19.5523 20 20 19.5523 20 19V5C20 4.44772 19.5523 4 19 4H5C4.44772 4 4 4.44772 4 5V19Z",fill:"currentColor"}}]})(s)}const is="_post_1b3zz_1",ls="_sender_1b3zz_7",ds="_text_1b3zz_14",ps="_info_1b3zz_19",ms="_name_1b3zz_23",us="_date_1b3zz_27",hs="_likes_1b3zz_32",f={post:is,sender:ls,text:ds,info:ps,name:ms,date:us,likes:hs},fs=({id:s,text:n,likes:t,myLike:o,time:r,date:a,userID:i,name:l,photo:p})=>{const m=w(),u=()=>{m(o?Z(s):G(s))};return e.jsxs("div",{className:f.post,children:[e.jsx(I,{size:"5rem",photo:p}),e.jsxs("div",{className:f.sender,children:[e.jsxs("div",{className:f.info,children:[e.jsx("p",{className:f.name,"data-id":i,children:l}),e.jsxs("p",{className:f.date,children:[e.jsx("span",{children:r}),e.jsx("span",{children:a})]})]}),e.jsx("p",{className:f.text,children:n}),e.jsxs("div",{className:f.likes,children:[e.jsx("span",{className:f.likesCount,children:t}),o?e.jsx(S,{onClick:u}):e.jsx(R,{onClick:u})]})]})]})},xs="_wrapper_1y73d_1",_s={wrapper:xs},js=s=>s.profile.postsData,ws=()=>{const s=h(js),n=s.length?s.map(t=>e.jsx(fs,{id:t.id,text:t.text,likes:t.likes,myLike:t.myLike,time:t.time,date:t.date,userID:t.userID,name:t.name,photo:t.photo},t.id)):e.jsx("div",{children:"Your wall is empty..."});return e.jsx("div",{className:_s.wrapper,children:n})},gs="_formWrapper_1rxif_1",vs="_postsWrapper_1rxif_27",bs="_title_1rxif_31",N={formWrapper:gs,postsWrapper:vs,title:bs},ks=({user:s})=>{const n=w(),t=h(a=>a.profile.newPostText),o=a=>{n(K(a))},r=(a,i,l)=>{n(Q(a,i,l))};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:N.formWrapper,children:e.jsxs(re,{placeholder:"Tell about your news...",currentText:t,addText:r,updateCurrentText:o,children:["Share ",e.jsx(cs,{size:"16px"})]})}),e.jsxs("div",{className:N.postsWrapper,children:[e.jsxs("div",{className:N.title,children:[s," wall"]}),e.jsx(ws,{})]})]})},Cs=s=>s.profile.followed,Ns=s=>s.profile.followingInProgress,Ss=s=>{const n=h(Y),t=Number(s||n),o=h(A),r=h(X),a=h(Cs),i=h(Ns),p=h(ee)==="loading";return{currentUser:t,status:o,profile:r,followed:a,followingInProgress:i,loading:p}},zs=oe(()=>{const s=w(),{userID:n}=se(),{currentUser:t,status:o,profile:r,followed:a,followingInProgress:i,loading:l}=Ss(n);return c.useEffect(()=>{s(te(t))},[t]),r?l?e.jsx(ne,{}):e.jsxs(e.Fragment,{children:[e.jsx(as,{profile:r,isMe:!n,status:o,children:e.jsx(_e,{isMe:!n,userID:r.userId,followed:a,followingInProgress:i})}),e.jsx(ks,{user:n?`${r.fullName}'s `:"My "})]}):null});export{zs as Profile};
