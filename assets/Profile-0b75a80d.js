var P=Object.defineProperty;var U=(s,n,t)=>n in s?P(s,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[n]=t;var k=(s,n,t)=>(U(s,typeof n!="symbol"?n+"":n,t),t);import{l as w,j as e,A as R,o as S,p as I,q as D,t as M,k as f,G as T,v as E,w as H,r as c,x as $,B as b,y as W,z as B,C as F,D as O,E as V,F as q,H as J,I as Z,J as _,K as G,M as K,O as Q,Q as Y,S as X,T as ee,L as se}from"./index-555df8c0.js";import{A as te}from"./AddItemForm-73aebe2f.js";import{w as ne}from"./withAuthRedirect-443ff9b8.js";const oe="_formWrapper_1rxif_1",re="_postsWrapper_1rxif_27",ae="_title_1rxif_31",C={formWrapper:oe,postsWrapper:re,title:ae},ce="_wrapper_1y73d_1",ie={wrapper:ce},le="_post_1b3zz_1",de="_sender_1b3zz_7",pe="_text_1b3zz_14",me="_info_1b3zz_19",ue="_name_1b3zz_23",he="_date_1b3zz_27",fe="_likes_1b3zz_32",h={post:le,sender:de,text:pe,info:me,name:ue,date:he,likes:fe},xe=({id:s,text:n,likes:t,myLike:o,time:r,date:a,userID:i,name:d,photo:u})=>{const p=w(),m=()=>{p(o?D(s):M(s))};return e.jsxs("div",{className:h.post,children:[e.jsx(R,{size:"5rem",photo:u}),e.jsxs("div",{className:h.sender,children:[e.jsxs("div",{className:h.info,children:[e.jsx("p",{className:h.name,"data-id":i,children:d}),e.jsxs("p",{className:h.date,children:[e.jsx("span",{children:r}),e.jsx("span",{children:a})]})]}),e.jsx("p",{className:h.text,children:n}),e.jsxs("div",{className:h.likes,children:[e.jsx("span",{className:h.likesCount,children:t}),o?e.jsx(S,{onClick:m}):e.jsx(I,{onClick:m})]})]})]})},_e=s=>s.profile.postsData,je=()=>{const s=f(_e),n=s.length?s.map(t=>e.jsx(xe,{id:t.id,text:t.text,likes:t.likes,myLike:t.myLike,time:t.time,date:t.date,userID:t.userID,name:t.name,photo:t.photo},t.id)):e.jsx("div",{children:"Your wall is empty..."});return e.jsx("div",{className:ie.wrapper,children:n})};function we(s){return T({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M12 6C12.5523 6 13 6.44772 13 7V11H17C17.5523 11 18 11.4477 18 12C18 12.5523 17.5523 13 17 13H13V17C13 17.5523 12.5523 18 12 18C11.4477 18 11 17.5523 11 17V13H7C6.44772 13 6 12.5523 6 12C6 11.4477 6.44772 11 7 11H11V7C11 6.44772 11.4477 6 12 6Z",fill:"currentColor"}},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M5 22C3.34315 22 2 20.6569 2 19V5C2 3.34315 3.34315 2 5 2H19C20.6569 2 22 3.34315 22 5V19C22 20.6569 20.6569 22 19 22H5ZM4 19C4 19.5523 4.44772 20 5 20H19C19.5523 20 20 19.5523 20 19V5C20 4.44772 19.5523 4 19 4H5C4.44772 4 4 4.44772 4 5V19Z",fill:"currentColor"}}]})(s)}const ge=({user:s})=>{const n=w(),t=f(a=>a.profile.newPostText),o=a=>{n(E(a))},r=(a,i,d)=>{n(H(a,i,d))};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:C.formWrapper,children:e.jsxs(te,{placeholder:"Tell about your news...",currentText:t,addText:r,updateCurrentText:o,children:["Share ",e.jsx(we,{size:"16px"})]})}),e.jsxs("div",{className:C.postsWrapper,children:[e.jsxs("div",{className:C.title,children:[s," wall"]}),e.jsx(je,{})]})]})},ve="_wrapper_vxq17_1",be={wrapper:ve},ke=c.memo(s=>{const{followingInProgress:n,followed:t,userID:o,isMe:r}=s,a=w(),i=$(),d=(z,y)=>()=>{a(B(z,y))},u=()=>{i("/profile-settings")},p=t?"Unfollow":"Follow",m=t?e.jsx(F,{size:"1rem"}):e.jsx(O,{size:"1rem"}),g=t?"default":"green";return e.jsx("div",{className:be.wrapper,children:r?e.jsx(b,{onClick:u,variant:"white",size:"large",children:"Edit profile"}):e.jsxs(e.Fragment,{children:[e.jsxs(b,{onClick:()=>alert("Chat will work later"),variant:"white",size:"large",children:["Message ",e.jsx(W,{size:"1rem"})]}),e.jsxs(b,{disabled:n,variant:g,onClick:d(o,t),size:"large",children:[p,m]})]})})}),Ce=s=>s.profile.followingInProgress,Ne=s=>s.profile.followed,L=s=>s.profile.status,Re=s=>{const n=f(V),t=Number(s||n),o=f(L),r=f(q),a=f(Ne),i=f(Ce);return{currentUser:t,status:o,profile:r,followed:a,followingInProgress:i}},Se="_avatarModal_mt9m9_1",Ie="_content_mt9m9_8",Le="_name_mt9m9_16",Ae="_date_mt9m9_23",ze="_likes_mt9m9_29",ye="_lock_mt9m9_44",x={avatarModal:Se,content:Ie,name:Le,date:Ae,likes:ze,lock:ye},Pe=({photo:s,name:n})=>{const[t,o]=c.useState(!1);return e.jsxs("div",{className:x.avatarModal,children:[e.jsx("img",{src:s,alt:"Avatar"}),e.jsxs("aside",{className:x.content,children:[e.jsxs("h4",{className:x.name,children:[e.jsx("span",{children:n}),"'s avatar"]}),e.jsxs("p",{className:x.date,children:[e.jsx("span",{children:"09:22"})," 04 Jan 2023"]}),e.jsxs("div",{className:x.likes,children:[e.jsx("span",{children:"Likes:"})," ",t?1:0,t?e.jsx(S,{onClick:()=>o(!1)}):e.jsx(I,{onClick:()=>o(!0)})]}),e.jsxs("div",{className:x.lock,children:[e.jsx(J,{}),e.jsx("p",{children:"User locked comments..."})]})]})]})},Ue=({children:s})=>{const[n]=c.useState(()=>document.createElement("div"));return c.useEffect(()=>(document.body.appendChild(n),()=>{document.body.removeChild(n)}),[]),Z.createPortal(s,n)},De="_modalWrapper_596yy_1",Me="_background_596yy_11",Te="_window_596yy_20",Ee="_bcgActive_596yy_31",He="_wndActive_596yy_34",j={modalWrapper:De,background:Me,window:Te,bcgActive:Ee,wndActive:He};class A extends c.Component{constructor(t){super(t);k(this,"timerRefAppear");k(this,"timerRefClose");this.timerRefAppear=c.createRef(),this.timerRefClose=c.createRef(),this.state={mounted:!1,mountingDone:!1}}componentDidUpdate(t){t.opened!==this.props.opened&&(this.props.opened?(this.setState({mounted:!0}),this.timerRefAppear.current=setTimeout(()=>{this.setState({mountingDone:!0})},30)):(this.setState({mountingDone:!1}),this.timerRefClose.current=setTimeout(()=>{this.setState({mounted:!1})},300)))}componentWillUnmount(){this.timerRefAppear.current&&clearTimeout(this.timerRefAppear.current),this.timerRefClose.current&&clearTimeout(this.timerRefClose.current)}closeHandler(){this.props.onClose()}render(){const t=_(j.background,{[j.bcgActive]:this.state.mountingDone}),o=_(j.window,{[j.wndActive]:this.state.mountingDone});return this.state.mounted?e.jsx(Ue,{children:e.jsxs("div",{className:j.modalWrapper,children:[e.jsx("div",{className:t,onClick:this.closeHandler.bind(this)}),e.jsx("div",{className:o,children:this.props.children})]})}):null}}const $e=({photo:s,fullName:n})=>{const[t,o]=c.useState(!1),r=c.useCallback(()=>{o(!0)},[]),a=c.useCallback(()=>{o(!1)},[]);return e.jsxs(e.Fragment,{children:[e.jsx(R,{size:"12.5rem",photo:s,border:!0,onClick:r,turnOffCursorPointer:!s}),s&&e.jsx(A,{onClose:a,opened:t,children:e.jsx(Pe,{photo:s,name:n})})]})},We="_wrapper_1diab_1",Be={wrapper:We},Fe=c.memo(({onClose:s})=>{const n=w(),t=f(L),[o,r]=c.useState(t),a=d=>{r(d.currentTarget.value)},i=async()=>{await n(Q(o,s))};return e.jsxs("div",{className:Be.wrapper,children:[e.jsx(G,{title:"Enter new status",value:o,onChange:a}),e.jsxs(b,{variant:"main",size:"large",onClick:i,children:["Apply ",e.jsx(K,{size:"1.125rem"})]})]})}),Oe=({targetSize:s,onResize:n})=>{const t=c.useRef(null);return c.useEffect(()=>{const o=()=>{t.current&&n(t.current.offsetWidth>s)};return window.addEventListener("resize",o),o(),()=>{window.removeEventListener("resize",o)}},[s,n]),t},Ve="_root_1h4qm_1",qe="_status_1h4qm_15",Je="_pointer_1h4qm_23",N={root:Ve,status:qe,pointer:Je},Ze=c.memo(({isMe:s,status:n})=>{const[t,o]=c.useState(!1),r=Oe({targetSize:128,onResize:p=>{p?r.current.style.textAlign="left":r.current.style.textAlign="center"}}),a=()=>{s&&o(!0)},i=()=>{o(!1)},d="Enter status...",u={status:_(N.status,{[N.pointer]:s})};return!s&&!n?null:e.jsxs("div",{className:N.root,children:[s&&e.jsx(A,{onClose:i,opened:t,children:e.jsx(Fe,{onClose:i})}),e.jsx("p",{className:u.status,onClick:a,ref:r,children:n||d})]})}),Ge=""+new URL("another-user-d470d993.webp",import.meta.url).href,Ke="_extraInfo_cb27k_1",Qe="_showExtraButton_cb27k_4",Ye="_showInfo_cb27k_19",Xe="_accordion_cb27k_22",es="_expanded_cb27k_26",ss="_list_cb27k_30",ts="_showList_cb27k_38",ns="_contactsTitle_cb27k_45",os="_contacts_cb27k_45",rs="_contactIcon_cb27k_59",as="_item_cb27k_67",l={extraInfo:Ke,showExtraButton:Qe,showInfo:Ye,accordion:Xe,expanded:es,list:ss,showList:ts,contactsTitle:ns,contacts:os,contactIcon:rs,item:as},cs=""+new URL("github-6d3fae75.svg",import.meta.url).href,is=""+new URL("vk-49ab6602.svg",import.meta.url).href,ls=""+new URL("facebook-1273c07c.svg",import.meta.url).href,ds=""+new URL("instagram-ed2b0b8d.svg",import.meta.url).href,ps=""+new URL("twitter-6624b7ae.svg",import.meta.url).href,ms=""+new URL("website-28ec6190.svg",import.meta.url).href,us=""+new URL("mainLink-6ba5afa8.svg",import.meta.url).href,hs=""+new URL("youtube-f52ea793.svg",import.meta.url).href,fs={github:cs,vk:is,facebook:ls,instagram:ds,twitter:ps,website:ms,mainLink:us,youtube:hs},xs=s=>{const{contacts:n,aboutMe:t,lookingForAJobDescription:o,lookingForAJob:r}=s.profile,[a,i]=c.useState(!1),d=c.useCallback(()=>{i(m=>!m)},[]),u="User doesn't provide information",p={button:_(l.showExtraButton,{[l.showInfo]:a}),accordion:_(l.accordion,{[l.expanded]:a}),list:_(l.list,{[l.showList]:a})};return e.jsxs("div",{className:l.extraInfo,children:[e.jsxs("button",{onClick:d,className:p.button,children:["Show more",e.jsx(Y,{size:"1.5rem"})]}),e.jsx("div",{className:p.accordion,children:e.jsxs("div",{className:p.list,children:[e.jsxs("p",{children:[e.jsx("span",{className:l.item,children:"About me:"}),t||u]}),e.jsxs("p",{children:[e.jsx("span",{className:l.item,children:"Looking for a job:"}),e.jsx("input",{type:"checkbox",checked:r,readOnly:!0})]}),e.jsxs("p",{children:[e.jsx("span",{className:l.item,children:"Job description:"}),o||u]}),e.jsx("h4",{className:l.contactsTitle,children:"Contacts:"}),e.jsx("ul",{className:l.contacts,children:n&&Object.entries(n).map(([m,g])=>g?e.jsx("li",{children:e.jsx("a",{href:g,target:"_blank",rel:"noreferrer",children:e.jsx("img",{src:fs[m],className:l.contactIcon,alt:`${m} icon`})})},m):null)})]})})]})},_s=""+new URL("profile-bcg-078e3812.webp",import.meta.url).href,js=""+new URL("another-user-35e617b0.jpg",import.meta.url).href,ws="_header_dg3hd_1",gs="_person_dg3hd_8",vs="_info_dg3hd_15",bs="_name_dg3hd_20",v={header:ws,person:gs,info:vs,name:bs},ks=""+new URL("profile-bcg-6d60cad0.jpeg",import.meta.url).href,Cs=({isMe:s,status:n,profile:t,children:o})=>{const{fullName:r,photos:{large:a}}=t;return e.jsxs("section",{children:[e.jsxs("picture",{children:[e.jsx("source",{srcSet:s?_s:Ge,type:"image/webp"}),e.jsx("img",{className:v.header,src:s?ks:js,alt:"Profile cover"})]}),e.jsxs("div",{className:v.person,children:[e.jsxs("div",{className:v.info,children:[e.jsx($e,{photo:a,fullName:r}),e.jsx("h2",{className:v.name,children:r})]}),o]}),e.jsx(Ze,{isMe:s,status:n}),e.jsx(xs,{profile:t})]})},Ls=ne(()=>{const s=w(),{userID:n}=X(),{currentUser:t,status:o,profile:r,followed:a,followingInProgress:i}=Re(n);return c.useEffect(()=>{s(ee(t))},[t]),r?e.jsxs(e.Fragment,{children:[e.jsx(Cs,{profile:r,isMe:!n,status:o,children:e.jsx(ke,{isMe:!n,userID:r.userId,followed:a,followingInProgress:i})}),e.jsx(ge,{user:n?`${r.fullName}'s `:"My "})]}):e.jsx(se,{})});export{Ls as Profile};
