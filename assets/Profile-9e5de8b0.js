var P=Object.defineProperty;var M=(s,n,t)=>n in s?P(s,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[n]=t;var v=(s,n,t)=>(M(s,typeof n!="symbol"?n+"":n,t),t);import{l as w,j as e,A as N,o as S,p as A,q as D,t as E,k as u,G as H,v as T,w as U,r as i,x as $,B as C,y as W,z as q,C as F,D as B,E as V,F as O,H as J,I as G,J as _,K as Z,M as K,O as Y,Q,S as X,T as ee,L as se}from"./index-ce00cee0.js";import{A as te}from"./AddItemForm-ba4906ab.js";import{w as ne}from"./withAuthRedirect-5054e8df.js";const oe="_formWrapper_1rxif_1",re="_postsWrapper_1rxif_27",ae="_title_1rxif_31",k={formWrapper:oe,postsWrapper:re,title:ae},ce="_wrapper_1y73d_1",ie={wrapper:ce},le="_post_1b3zz_1",de="_sender_1b3zz_7",pe="_text_1b3zz_14",me="_info_1b3zz_19",he="_name_1b3zz_23",ue="_date_1b3zz_27",xe="_likes_1b3zz_32",h={post:le,sender:de,text:pe,info:me,name:he,date:ue,likes:xe},fe=({id:s,text:n,likes:t,myLike:o,time:r,date:a,userID:l,name:p,photo:d})=>{const m=w(),x=()=>{m(o?D(s):E(s))};return e.jsxs("div",{className:h.post,children:[e.jsx(N,{size:"5rem",photo:d}),e.jsxs("div",{className:h.sender,children:[e.jsxs("div",{className:h.info,children:[e.jsx("p",{className:h.name,"data-id":l,children:p}),e.jsxs("p",{className:h.date,children:[e.jsx("span",{children:r}),e.jsx("span",{children:a})]})]}),e.jsx("p",{className:h.text,children:n}),e.jsxs("div",{className:h.likes,children:[e.jsx("span",{className:h.likesCount,children:t}),o?e.jsx(S,{onClick:x}):e.jsx(A,{onClick:x})]})]})]})},_e=s=>s.profile.postsData,je=()=>{const s=u(_e),n=s.length?s.map(t=>e.jsx(fe,{id:t.id,text:t.text,likes:t.likes,myLike:t.myLike,time:t.time,date:t.date,userID:t.userID,name:t.name,photo:t.photo},t.id)):e.jsx("div",{children:"Your wall is empty..."});return e.jsx("div",{className:ie.wrapper,children:n})};function we(s){return H({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M12 6C12.5523 6 13 6.44772 13 7V11H17C17.5523 11 18 11.4477 18 12C18 12.5523 17.5523 13 17 13H13V17C13 17.5523 12.5523 18 12 18C11.4477 18 11 17.5523 11 17V13H7C6.44772 13 6 12.5523 6 12C6 11.4477 6.44772 11 7 11H11V7C11 6.44772 11.4477 6 12 6Z",fill:"currentColor"}},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M5 22C3.34315 22 2 20.6569 2 19V5C2 3.34315 3.34315 2 5 2H19C20.6569 2 22 3.34315 22 5V19C22 20.6569 20.6569 22 19 22H5ZM4 19C4 19.5523 4.44772 20 5 20H19C19.5523 20 20 19.5523 20 19V5C20 4.44772 19.5523 4 19 4H5C4.44772 4 4 4.44772 4 5V19Z",fill:"currentColor"}}]})(s)}const ge=({user:s})=>{const n=w(),t=u(a=>a.profile.newPostText),o=a=>{n(T(a))},r=(a,l,p)=>{n(U(a,l,p))};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:k.formWrapper,children:e.jsxs(te,{placeholder:"Tell about your news...",currentText:t,addText:r,updateCurrentText:o,children:["Share ",e.jsx(we,{size:"16px"})]})}),e.jsxs("div",{className:k.postsWrapper,children:[e.jsxs("div",{className:k.title,children:[s," wall"]}),e.jsx(je,{})]})]})},Ce="_wrapper_vxq17_1",ve={wrapper:Ce},ke=i.memo(s=>{const{followingInProgress:n,followed:t,userID:o,isMe:r}=s,a=w(),l=$(),p=(y,L)=>()=>{a(q(y,L))},d=()=>{l("/profile-settings")},m=t?"Unfollow":"Follow",x=t?e.jsx(F,{size:"1rem"}):e.jsx(B,{size:"1rem"}),z=t?"default":"green";return e.jsx("div",{className:ve.wrapper,children:r?e.jsx(C,{onClick:d,variant:"white",size:"large",children:"Edit profile"}):e.jsxs(e.Fragment,{children:[e.jsxs(C,{onClick:()=>alert("Chat will work later"),variant:"white",size:"large",children:["Message ",e.jsx(W,{size:"1rem"})]}),e.jsxs(C,{disabled:n,variant:z,onClick:p(o,t),size:"large",children:[m,x]})]})})}),be=s=>s.profile.followingInProgress,Ne=s=>s.profile.followed,I=s=>s.profile.status,Se=s=>{const n=u(V),t=Number(s||n),o=u(I),r=u(O),a=u(Ne),l=u(be);return{currentUser:t,status:o,profile:r,followed:a,followingInProgress:l}},Ae="_avatarModal_mt9m9_1",Ie="_content_mt9m9_8",Re="_name_mt9m9_16",ze="_date_mt9m9_23",ye="_likes_mt9m9_29",Le="_lock_mt9m9_44",f={avatarModal:Ae,content:Ie,name:Re,date:ze,likes:ye,lock:Le},Pe=({photo:s,name:n})=>{const[t,o]=i.useState(!1);return e.jsxs("div",{className:f.avatarModal,children:[e.jsx("img",{src:s,alt:"Avatar"}),e.jsxs("aside",{className:f.content,children:[e.jsxs("h4",{className:f.name,children:[e.jsx("span",{children:n}),"'s avatar"]}),e.jsxs("p",{className:f.date,children:[e.jsx("span",{children:"09:22"})," 04 Jan 2023"]}),e.jsxs("div",{className:f.likes,children:[e.jsx("span",{children:"Likes:"})," ",t?1:0,t?e.jsx(S,{onClick:()=>o(!1)}):e.jsx(A,{onClick:()=>o(!0)})]}),e.jsxs("div",{className:f.lock,children:[e.jsx(J,{}),e.jsx("p",{children:"User locked comments..."})]})]})]})},Me=({children:s})=>{const[n]=i.useState(()=>document.createElement("div"));return i.useEffect(()=>(document.body.appendChild(n),()=>{document.body.removeChild(n)}),[]),G.createPortal(s,n)},De="_modalWrapper_596yy_1",Ee="_background_596yy_11",He="_window_596yy_20",Te="_bcgActive_596yy_31",Ue="_wndActive_596yy_34",j={modalWrapper:De,background:Ee,window:He,bcgActive:Te,wndActive:Ue};class R extends i.Component{constructor(t){super(t);v(this,"timerRefAppear");v(this,"timerRefClose");this.timerRefAppear=i.createRef(),this.timerRefClose=i.createRef(),this.state={mounted:!1,mountingDone:!1}}componentDidUpdate(t){t.opened!==this.props.opened&&(this.props.opened?(this.setState({mounted:!0}),this.timerRefAppear.current=setTimeout(()=>{this.setState({mountingDone:!0})},30)):(this.setState({mountingDone:!1}),this.timerRefClose.current=setTimeout(()=>{this.setState({mounted:!1})},300)))}componentWillUnmount(){this.timerRefAppear.current&&clearTimeout(this.timerRefAppear.current),this.timerRefClose.current&&clearTimeout(this.timerRefClose.current)}closeHandler(){this.props.onClose()}render(){const t=_(j.background,{[j.bcgActive]:this.state.mountingDone}),o=_(j.window,{[j.wndActive]:this.state.mountingDone});return this.state.mounted?e.jsx(Me,{children:e.jsxs("div",{className:j.modalWrapper,children:[e.jsx("div",{className:t,onClick:this.closeHandler.bind(this)}),e.jsx("div",{className:o,children:this.props.children})]})}):null}}const $e=({photo:s,fullName:n})=>{const[t,o]=i.useState(!1),r=i.useCallback(()=>{o(!0)},[]),a=i.useCallback(()=>{o(!1)},[]);return e.jsxs(e.Fragment,{children:[e.jsx(N,{size:"12.5rem",photo:s,border:!0,onClick:r,turnOffCursorPointer:!s}),s&&e.jsx(R,{onClose:a,opened:t,children:e.jsx(Pe,{photo:s,name:n})})]})},We="_wrapper_1diab_1",qe={wrapper:We},Fe=i.memo(({onClose:s})=>{const n=w(),t=u(I),[o,r]=i.useState(t),a=p=>{r(p.currentTarget.value)},l=async()=>{await n(Y(o,s))};return e.jsxs("div",{className:qe.wrapper,children:[e.jsx(Z,{title:"Enter new status",value:o,onChange:a}),e.jsxs(C,{variant:"main",size:"large",onClick:l,children:["Apply ",e.jsx(K,{size:"1.125rem"})]})]})}),Be=({targetSize:s,onResize:n})=>{const t=i.useRef(null);return i.useEffect(()=>{const o=()=>{t.current&&n(t.current.offsetWidth>s)};return window.addEventListener("resize",o),o(),()=>{window.removeEventListener("resize",o)}},[s,n]),t},Ve="_root_1h4qm_1",Oe="_status_1h4qm_15",Je="_pointer_1h4qm_23",b={root:Ve,status:Oe,pointer:Je},Ge=i.memo(({isMe:s,status:n})=>{const[t,o]=i.useState(!1),r=Be({targetSize:128,onResize:m=>{m?r.current.style.textAlign="left":r.current.style.textAlign="center"}}),a=()=>{s&&o(!0)},l=()=>{o(!1)},p="Enter status...",d={status:_(b.status,{[b.pointer]:s})};return!s&&!n?null:e.jsxs("div",{className:b.root,children:[s&&e.jsx(R,{onClose:l,opened:t,children:e.jsx(Fe,{onClose:l})}),e.jsx("p",{className:d.status,onClick:a,ref:r,children:n||p})]})}),Ze=""+new URL("another-user-d470d993.webp",import.meta.url).href,Ke="_extraInfo_1q7r3_1",Ye="_showExtraButton_1q7r3_4",Qe="_showInfo_1q7r3_19",Xe="_accordion_1q7r3_22",es="_expanded_1q7r3_26",ss="_list_1q7r3_30",ts="_showList_1q7r3_38",ns="_contacts_1q7r3_45",os="_item_1q7r3_49",c={extraInfo:Ke,showExtraButton:Ye,showInfo:Qe,accordion:Xe,expanded:es,list:ss,showList:ts,contacts:ns,item:os},rs=s=>{const{contacts:n,aboutMe:t,lookingForAJobDescription:o,lookingForAJob:r}=s.profile,[a,l]=i.useState(!1),p=i.useCallback(()=>{l(x=>!x)},[]),d="User doesn't provide information",m={button:_(c.showExtraButton,{[c.showInfo]:a}),accordion:_(c.accordion,{[c.expanded]:a}),list:_(c.list,{[c.showList]:a})};return e.jsxs("div",{className:c.extraInfo,children:[e.jsxs("button",{onClick:p,className:m.button,children:["Show more",e.jsx(Q,{size:"1.5rem"})]}),e.jsx("div",{className:m.accordion,children:e.jsxs("div",{className:m.list,children:[e.jsxs("p",{children:[e.jsx("span",{className:c.item,children:"About me:"}),t||d]}),e.jsxs("p",{children:[e.jsx("span",{className:c.item,children:"Looking for a job:"}),e.jsx("input",{type:"checkbox",checked:r,readOnly:!0})]}),e.jsxs("p",{children:[e.jsx("span",{className:c.item,children:"Job description:"}),o||d]}),e.jsx("h4",{className:c.contacts,children:"Contacts:"}),e.jsxs("p",{children:[e.jsx("span",{className:c.item,children:"Github:"}),n.github||d]}),e.jsxs("p",{children:[e.jsx("span",{className:c.item,children:"Website:"}),n.website||d]}),e.jsxs("p",{children:[e.jsx("span",{className:c.item,children:"Instagram:"}),n.instagram||d]}),e.jsxs("p",{children:[e.jsx("span",{className:c.item,children:"Main Link:"}),n.mainLink||d]}),e.jsxs("p",{children:[e.jsx("span",{className:c.item,children:"Facebook:"}),n.facebook||d]}),e.jsxs("p",{children:[e.jsx("span",{className:c.item,children:"Twitter:"}),n.twitter||d]}),e.jsxs("p",{children:[e.jsx("span",{className:c.item,children:"YouTube:"}),n.youtube||d]}),e.jsxs("p",{children:[e.jsx("span",{className:c.item,children:"VK:"}),n.vk||d]})]})})]})},as=""+new URL("profile-bcg-078e3812.webp",import.meta.url).href,cs=""+new URL("another-user-35e617b0.jpg",import.meta.url).href,is="_header_dg3hd_1",ls="_person_dg3hd_8",ds="_info_dg3hd_15",ps="_name_dg3hd_20",g={header:is,person:ls,info:ds,name:ps},ms=""+new URL("profile-bcg-6d60cad0.jpeg",import.meta.url).href,hs=({isMe:s,status:n,profile:t,children:o})=>{const{fullName:r,photos:{large:a}}=t;return e.jsxs("section",{children:[e.jsxs("picture",{children:[e.jsx("source",{srcSet:s?as:Ze,type:"image/webp"}),e.jsx("img",{className:g.header,src:s?ms:cs,alt:"Profile cover"})]}),e.jsxs("div",{className:g.person,children:[e.jsxs("div",{className:g.info,children:[e.jsx($e,{photo:a,fullName:r}),e.jsx("h2",{className:g.name,children:r})]}),o]}),e.jsx(Ge,{isMe:s,status:n}),e.jsx(rs,{profile:t})]})},js=ne(()=>{const s=w(),{userID:n}=X(),{currentUser:t,status:o,profile:r,followed:a,followingInProgress:l}=Se(n);return i.useEffect(()=>{s(ee(t))},[t]),r?e.jsxs(e.Fragment,{children:[e.jsx(hs,{profile:r,isMe:!n,status:o,children:e.jsx(ke,{isMe:!n,userID:r.userId,followed:a,followingInProgress:l})}),e.jsx(ge,{user:n?`${r.fullName}'s `:"My "})]}):e.jsx(se,{})});export{js as Profile};
