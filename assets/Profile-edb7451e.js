var U=Object.defineProperty;var P=(s,n,t)=>n in s?U(s,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[n]=t;var k=(s,n,t)=>(P(s,typeof n!="symbol"?n+"":n,t),t);import{l as w,j as e,A as S,p as R,q as I,t as D,v as M,k as h,G as T,w as E,x as H,r as c,y as $,B as b,z as W,C as B,m as F,D as O,E as V,F as q,H as J,n as Z,I as G,J as K,K as _,M as Q,O as Y,Q as X,S as ee,T as se,U as te,L as ne}from"./index-7340c2ec.js";import{A as oe}from"./AddItemForm-c48f3e1e.js";import{w as re}from"./withAuthRedirect-9177b18f.js";const ae=""+new URL("github-6d3fae75.svg",import.meta.url).href,ce=""+new URL("vk-49ab6602.svg",import.meta.url).href,ie=""+new URL("facebook-1273c07c.svg",import.meta.url).href,le=""+new URL("instagram-ed2b0b8d.svg",import.meta.url).href,de=""+new URL("twitter-6624b7ae.svg",import.meta.url).href,pe=""+new URL("website-28ec6190.svg",import.meta.url).href,me=""+new URL("mainLink-6ba5afa8.svg",import.meta.url).href,ue=""+new URL("youtube-f52ea793.svg",import.meta.url).href,he={github:ae,vk:ce,facebook:ie,instagram:le,twitter:de,website:pe,mainLink:me,youtube:ue},fe="_formWrapper_1rxif_1",xe="_postsWrapper_1rxif_27",_e="_title_1rxif_31",C={formWrapper:fe,postsWrapper:xe,title:_e},je="_wrapper_1y73d_1",we={wrapper:je},ge="_post_1b3zz_1",ve="_sender_1b3zz_7",be="_text_1b3zz_14",ke="_info_1b3zz_19",Ce="_name_1b3zz_23",Ne="_date_1b3zz_27",Se="_likes_1b3zz_32",f={post:ge,sender:ve,text:be,info:ke,name:Ce,date:Ne,likes:Se},Re=({id:s,text:n,likes:t,myLike:o,time:r,date:a,userID:i,name:l,photo:p})=>{const m=w(),u=()=>{m(o?D(s):M(s))};return e.jsxs("div",{className:f.post,children:[e.jsx(S,{size:"5rem",photo:p}),e.jsxs("div",{className:f.sender,children:[e.jsxs("div",{className:f.info,children:[e.jsx("p",{className:f.name,"data-id":i,children:l}),e.jsxs("p",{className:f.date,children:[e.jsx("span",{children:r}),e.jsx("span",{children:a})]})]}),e.jsx("p",{className:f.text,children:n}),e.jsxs("div",{className:f.likes,children:[e.jsx("span",{className:f.likesCount,children:t}),o?e.jsx(R,{onClick:u}):e.jsx(I,{onClick:u})]})]})]})},Ie=s=>s.profile.postsData,Le=()=>{const s=h(Ie),n=s.length?s.map(t=>e.jsx(Re,{id:t.id,text:t.text,likes:t.likes,myLike:t.myLike,time:t.time,date:t.date,userID:t.userID,name:t.name,photo:t.photo},t.id)):e.jsx("div",{children:"Your wall is empty..."});return e.jsx("div",{className:we.wrapper,children:n})};function Ae(s){return T({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M12 6C12.5523 6 13 6.44772 13 7V11H17C17.5523 11 18 11.4477 18 12C18 12.5523 17.5523 13 17 13H13V17C13 17.5523 12.5523 18 12 18C11.4477 18 11 17.5523 11 17V13H7C6.44772 13 6 12.5523 6 12C6 11.4477 6.44772 11 7 11H11V7C11 6.44772 11.4477 6 12 6Z",fill:"currentColor"}},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M5 22C3.34315 22 2 20.6569 2 19V5C2 3.34315 3.34315 2 5 2H19C20.6569 2 22 3.34315 22 5V19C22 20.6569 20.6569 22 19 22H5ZM4 19C4 19.5523 4.44772 20 5 20H19C19.5523 20 20 19.5523 20 19V5C20 4.44772 19.5523 4 19 4H5C4.44772 4 4 4.44772 4 5V19Z",fill:"currentColor"}}]})(s)}const ze=({user:s})=>{const n=w(),t=h(a=>a.profile.newPostText),o=a=>{n(E(a))},r=(a,i,l)=>{n(H(a,i,l))};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:C.formWrapper,children:e.jsxs(oe,{placeholder:"Tell about your news...",currentText:t,addText:r,updateCurrentText:o,children:["Share ",e.jsx(Ae,{size:"16px"})]})}),e.jsxs("div",{className:C.postsWrapper,children:[e.jsxs("div",{className:C.title,children:[s," wall"]}),e.jsx(Le,{})]})]})},ye="_wrapper_vxq17_1",Ue={wrapper:ye},Pe=c.memo(s=>{const{followingInProgress:n,followed:t,userID:o,isMe:r}=s,a=w(),i=$(),l=(z,y)=>()=>{a(B(z,y))},p=()=>{i(F.profileSettings)},m=t?"Unfollow":"Follow",u=t?e.jsx(O,{size:"1rem"}):e.jsx(V,{size:"1rem"}),g=t?"default":"green";return e.jsx("div",{className:Ue.wrapper,children:r?e.jsx(b,{onClick:p,variant:"white",size:"large",children:"Edit profile"}):e.jsxs(e.Fragment,{children:[e.jsxs(b,{onClick:()=>alert("Chat will work later"),variant:"white",size:"large",children:["Message ",e.jsx(W,{size:"1rem"})]}),e.jsxs(b,{disabled:n,variant:g,onClick:l(o,t),size:"large",children:[m,u]})]})})}),De=s=>s.profile.followingInProgress,Me=s=>s.profile.followed,L=s=>s.profile.status,Te=s=>{const n=h(q),t=Number(s||n),o=h(L),r=h(J),a=h(Me),i=h(De),p=h(Z)==="loading";return{currentUser:t,status:o,profile:r,followed:a,followingInProgress:i,loading:p}},Ee="_avatarModal_mt9m9_1",He="_content_mt9m9_8",$e="_name_mt9m9_16",We="_date_mt9m9_23",Be="_likes_mt9m9_29",Fe="_lock_mt9m9_44",x={avatarModal:Ee,content:He,name:$e,date:We,likes:Be,lock:Fe},Oe=({photo:s,name:n})=>{const[t,o]=c.useState(!1);return e.jsxs("div",{className:x.avatarModal,children:[e.jsx("img",{src:s,alt:"Avatar"}),e.jsxs("aside",{className:x.content,children:[e.jsxs("h4",{className:x.name,children:[e.jsx("span",{children:n}),"'s avatar"]}),e.jsxs("p",{className:x.date,children:[e.jsx("span",{children:"09:22"})," 04 Jan 2023"]}),e.jsxs("div",{className:x.likes,children:[e.jsx("span",{children:"Likes:"})," ",t?1:0,t?e.jsx(R,{onClick:()=>o(!1)}):e.jsx(I,{onClick:()=>o(!0)})]}),e.jsxs("div",{className:x.lock,children:[e.jsx(G,{}),e.jsx("p",{children:"User locked comments..."})]})]})]})},Ve=({children:s})=>{const[n]=c.useState(()=>document.createElement("div"));return c.useEffect(()=>(document.body.appendChild(n),()=>{document.body.removeChild(n)}),[]),K.createPortal(s,n)},qe="_modalWrapper_596yy_1",Je="_background_596yy_11",Ze="_window_596yy_20",Ge="_bcgActive_596yy_31",Ke="_wndActive_596yy_34",j={modalWrapper:qe,background:Je,window:Ze,bcgActive:Ge,wndActive:Ke};class A extends c.Component{constructor(t){super(t);k(this,"timerRefAppear");k(this,"timerRefClose");this.timerRefAppear=c.createRef(),this.timerRefClose=c.createRef(),this.state={mounted:!1,mountingDone:!1}}componentDidUpdate(t){t.opened!==this.props.opened&&(this.props.opened?(this.setState({mounted:!0}),this.timerRefAppear.current=setTimeout(()=>{this.setState({mountingDone:!0})},30)):(this.setState({mountingDone:!1}),this.timerRefClose.current=setTimeout(()=>{this.setState({mounted:!1})},300)))}componentWillUnmount(){this.timerRefAppear.current&&clearTimeout(this.timerRefAppear.current),this.timerRefClose.current&&clearTimeout(this.timerRefClose.current)}closeHandler(){this.props.onClose()}render(){const t=_(j.background,{[j.bcgActive]:this.state.mountingDone}),o=_(j.window,{[j.wndActive]:this.state.mountingDone});return this.state.mounted?e.jsx(Ve,{children:e.jsxs("div",{className:j.modalWrapper,children:[e.jsx("div",{className:t,onClick:this.closeHandler.bind(this)}),e.jsx("div",{className:o,children:this.props.children})]})}):null}}const Qe=({photo:s,fullName:n})=>{const[t,o]=c.useState(!1),r=c.useCallback(()=>{o(!0)},[]),a=c.useCallback(()=>{o(!1)},[]);return e.jsxs(e.Fragment,{children:[e.jsx(S,{size:"12.5rem",photo:s,border:!0,onClick:r,turnOffCursorPointer:!s}),s&&e.jsx(A,{onClose:a,opened:t,children:e.jsx(Oe,{photo:s,name:n})})]})},Ye="_wrapper_1diab_1",Xe={wrapper:Ye},es=c.memo(({onClose:s})=>{const n=w(),t=h(L),[o,r]=c.useState(t),a=l=>{r(l.currentTarget.value)},i=async()=>{await n(X(o,s))};return e.jsxs("div",{className:Xe.wrapper,children:[e.jsx(Q,{title:"Enter new status",value:o,onChange:a}),e.jsxs(b,{variant:"main",size:"large",onClick:i,children:["Apply ",e.jsx(Y,{size:"1.125rem"})]})]})}),ss=({targetSize:s,onResize:n})=>{const t=c.useRef(null);return c.useEffect(()=>{const o=()=>{t.current&&n(t.current.offsetWidth>s)};return window.addEventListener("resize",o),o(),()=>{window.removeEventListener("resize",o)}},[s,n]),t},ts="_root_1h4qm_1",ns="_status_1h4qm_15",os="_pointer_1h4qm_23",N={root:ts,status:ns,pointer:os},rs=c.memo(({isMe:s,status:n})=>{const[t,o]=c.useState(!1),r=ss({targetSize:128,onResize:m=>{m?r.current.style.textAlign="left":r.current.style.textAlign="center"}}),a=()=>{s&&o(!0)},i=()=>{o(!1)},l="Enter status...",p={status:_(N.status,{[N.pointer]:s})};return!s&&!n?null:e.jsxs("div",{className:N.root,children:[s&&e.jsx(A,{onClose:i,opened:t,children:e.jsx(es,{onClose:i})}),e.jsx("p",{className:p.status,onClick:a,ref:r,children:n||l})]})}),as=""+new URL("another-user-d470d993.webp",import.meta.url).href,cs="_extraInfo_cb27k_1",is="_showExtraButton_cb27k_4",ls="_showInfo_cb27k_19",ds="_accordion_cb27k_22",ps="_expanded_cb27k_26",ms="_list_cb27k_30",us="_showList_cb27k_38",hs="_contactsTitle_cb27k_45",fs="_contacts_cb27k_45",xs="_contactIcon_cb27k_59",_s="_item_cb27k_67",d={extraInfo:cs,showExtraButton:is,showInfo:ls,accordion:ds,expanded:ps,list:ms,showList:us,contactsTitle:hs,contacts:fs,contactIcon:xs,item:_s},js=s=>{const{contacts:n,aboutMe:t,lookingForAJobDescription:o,lookingForAJob:r}=s.profile,[a,i]=c.useState(!1),l=c.useCallback(()=>{i(u=>!u)},[]),p="User doesn't provide information",m={button:_(d.showExtraButton,{[d.showInfo]:a}),accordion:_(d.accordion,{[d.expanded]:a}),list:_(d.list,{[d.showList]:a})};return e.jsxs("div",{className:d.extraInfo,children:[e.jsxs("button",{onClick:l,className:m.button,children:["Show more",e.jsx(ee,{size:"1.5rem"})]}),e.jsx("div",{className:m.accordion,children:e.jsxs("div",{className:m.list,children:[e.jsxs("p",{children:[e.jsx("span",{className:d.item,children:"About me:"}),t||p]}),e.jsxs("p",{children:[e.jsx("span",{className:d.item,children:"Looking for a job:"}),e.jsx("input",{type:"checkbox",checked:r,readOnly:!0})]}),e.jsxs("p",{children:[e.jsx("span",{className:d.item,children:"Job description:"}),o||p]}),e.jsx("h4",{className:d.contactsTitle,children:"Contacts:"}),e.jsx("ul",{className:d.contacts,children:n&&Object.entries(n).map(([u,g])=>g?e.jsx("li",{children:e.jsx("a",{href:g,target:"_blank",rel:"noreferrer",children:e.jsx("img",{src:he[u],className:d.contactIcon,alt:`${u} icon`})})},u):null)})]})})]})},ws=""+new URL("profile-bcg-078e3812.webp",import.meta.url).href,gs=""+new URL("another-user-35e617b0.jpg",import.meta.url).href,vs="_header_dg3hd_1",bs="_person_dg3hd_8",ks="_info_dg3hd_15",Cs="_name_dg3hd_20",v={header:vs,person:bs,info:ks,name:Cs},Ns=""+new URL("profile-bcg-6d60cad0.jpeg",import.meta.url).href,Ss=({isMe:s,status:n,profile:t,children:o})=>{const{fullName:r,photos:{large:a}}=t;return e.jsxs("section",{children:[e.jsxs("picture",{children:[e.jsx("source",{srcSet:s?ws:as,type:"image/webp"}),e.jsx("img",{className:v.header,src:s?Ns:gs,alt:"Profile cover"})]}),e.jsxs("div",{className:v.person,children:[e.jsxs("div",{className:v.info,children:[e.jsx(Qe,{photo:a,fullName:r}),e.jsx("h2",{className:v.name,children:r})]}),o]}),e.jsx(rs,{isMe:s,status:n}),e.jsx(js,{profile:t})]})},zs=re(()=>{const s=w(),{userID:n}=se(),{currentUser:t,status:o,profile:r,followed:a,followingInProgress:i,loading:l}=Te(n);return c.useEffect(()=>{s(te(t))},[t]),r?l?e.jsx(ne,{}):e.jsxs(e.Fragment,{children:[e.jsx(Ss,{profile:r,isMe:!n,status:o,children:e.jsx(Pe,{isMe:!n,userID:r.userId,followed:a,followingInProgress:i})}),e.jsx(ze,{user:n?`${r.fullName}'s `:"My "})]}):null});export{zs as Profile};
